Спрогнозировать рост данных и спроектировать модель хранения и архивации

Цель:
Научиться прогнозировать рост данных и возможные проблемы

Описание/Пошаговая инструкция выполнения домашнего задания:
Формируем документ в котором описываем

прогноз по возможному росту базы
рост данных
рост количества пользователей
всплески одновременных соединений
описываем возможные угрозы и методы защиты от них
предлагаем стратегии бэкапа
репликации
кластеризации

## 1. Прогноз по возможному росту базы и количества пользователей
Выделим несколько этапов в росте базы данных интернет-магазина: 

а) 1 этап (Открытие сайта). На данном этапе объем данных будет небольшим. 
В частности, мы имеем начальный список товаров, пользователей, прайс-листов и список справочников. 
Рост данных возможен благодаря новым заказам (примерно 1-2 заказа в день или 10-20 записей в БД) в таблицах:
- users
- orders
- orders_products
- delivery
- reviews
- payments
 
Количество пользователей 10-20 уникальных пользователей в день. 
Параметр max_connections можно оставить по умолчанию 151, а для max_user_connections можно установить значение 10.  

б) 2 этап (1 - 2 года после открытия). Рост данных по новым заказам (ориентировочно 10-15 заказов в день или 50-100 записей в БД).
Количество пользователей 200-300 уникальных пользователей в день. 
Параметр max_connections можно увеличить до 500, а для max_user_connections можно установить значение 50.

в) 3 этап. Рост данных по новым заказам (ориентировочно, 15-30 заказов в день, 100-150 записей в БД).  
Количество пользователей ~500 уникальных пользователей в день. Количество одновременных соединений можно увеличить до 500-1000. 

## Описываем возможные угрозы и методы защиты от них
Возможные угрозы - недоступность сервера БД, потеря данных, резкое увеличение количества пользователей.
Для обеспечения постоянной доступности сервера будем иметь запасной сервер, либо настроим репликацию или кластер innoDB. 
Для защиты от потери данных необходимо настроим автоматический бэкап данных. 
От пиковых нагрузок также может защитить репликаций или кластер innoDB. 

## Всплески одновременных соединений
Всплески одновременных соединений возможны в случае запуска рекламы, акции, в период активных покупок (подготовка детей к школе, праздничные дни). 
Необходимо настроить параметры max_connections и max_user_connections исходя из средней нагрузки, рассчитывая на увеличение в 2-5 раз. 

## Стратегии бэкапа
Для защиты от потери данных необходимо настроить автоматический бэкап. 
Стратегия бэкапа следующая: 
Время восстановления из резервной копии (RTO) - 1 час
Точка восстановления (RPO) - 1 час
Полный бэкап - 1 раз в неделю, дифференциальный бэкап - 1 раз в день, инкрементальный - 1 раз в час. 
На первом этапе бэкап можно делать на самом сервере БД, т.к. у нас пока нет репликации. Для надежности данные можно копировать на другой сервер. 
На втором и третьем этапе бэкап можно делать с реплики. Также для надежности данные можно копировать на мастер. 

## Стратегия репликации и кластеризации
На первом этапе можно не подключать репликацию, т.к. нагрузка на БД небольшая.
На втором этапе, в зависимости от нагрузки, можно подключить асинхронную master-slave репликацию, подключив еще одну ноду. 
На третьем этапе, возможнпри большой нагрузке, чтобы обеспечить отказоустойчивость, возможно подключение кластера innoDB (на 3 и более ноды). 
